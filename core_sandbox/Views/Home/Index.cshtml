@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Apex Charts (Boiler Plate)</h1>
    <h5>Developed by Jamal Hussain</h5>
</div>
<div class="row">
    <div class="col-md-6">
        <h4>Apex Pie Chart</h4>
        <div id="pieChart">

        </div>

    </div>
    <div class="col-md-6">
        <h4>Apex Bar Chart</h4>
        <div id="barChart">

        </div>

    </div>
    <div class="col-md-6">
        <h4>Apex Line Chart</h4>
        <div id="lineChart">

        </div>

    </div>
    <div class="col-md-6">
        <h4>Apex stacked bar chart</h4>
        <div id="stackedBarChart">

        </div>
    </div>
    <div class="col-md-6">
        <h4>Apex Pie chart with drop down (Ajax Request)</h4>
        <select id="depSelect" class="form-control form-select" aria-label="Default select example">
            <option selected value="-1">Open this select menu</option>
            <option value="1">One</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
        </select>
        <div id="pieChart1">

        </div>

    </div>
    <div class="col-md-6">
        <h4>Apex Line chart with drop down (Ajax Request)</h4>
        <select id="dep1Select" class="form-control form-select" aria-label="Default select example">
            <option selected value="-1">Open this select menu</option>
            <option value="1">Dep1</option>
            <option value="2">Dep2</option>
            <option value="3">Dep2</option>
        </select>
        <div id="lineChart1">

        </div>
    </div>

    <div class="col-md-12">
        <h4>Apex stacked bar chart (Sales Growth & Decline)</h4>
        <div id="salesGrowthDecline">

        </div>
    </div>
    <div class="col-md-12">
        <h4>Apex spline chart (Multiple Products Sales)</h4>
        <div id="multipleProductSales">

        </div>
    </div>

</div>
@section scripts
{
    <script type="text/javascript">
       $(function () {
           renderPieChart();
           renderBarChart();
           renderLineChart();
           renderPieChartWithOptions();
           renderLineChartWithOptions();
           renderStackedBarChart();
           renderBarChartWithNegetive();
           renderMultipleProductSalesSpline();
       });
        function renderMultipleProductSalesSpline() {
            var options = {
                series: [{
                    name: 'Product A',
                    data: [31, 40, 28, 51, 42, 109, 100]
                }, {
                    name: 'Product B',
                    data: [11, 32, 45, 32, 34, 52, 41]
                    },
                    {
                        name: 'Product C',
                        data: [6, 4, 54, 22, 31, 56, 98]
                    }

                ],
                chart: {
                    height: 350,
                    type: 'area'
                },
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth'
                },
                xaxis: {
                    type: 'datetime',
                    categories: ["2018-09-19T00:00:00.000Z", "2018-09-19T01:30:00.000Z", "2018-09-19T02:30:00.000Z", "2018-09-19T03:30:00.000Z", "2018-09-19T04:30:00.000Z", "2018-09-19T05:30:00.000Z", "2018-09-19T06:30:00.000Z"]
                },
                tooltip: {
                    x: {
                        format: 'dd/MM/yy HH:mm'
                    },
                },
            };

            var chart = new ApexCharts(document.querySelector("#multipleProductSales"), options);
            chart.render();
        }
        function renderBarChartWithNegetive() {
            //sales growth and decline concept


            var options = {
                series: [{
                    name: 'Cash Flow',
                    data: [1.45, 5.42, 5.9, -0.42, -12.6, -18.1, -18.2, -14.16, -11.1, -6.09, 0.34, 3.88, 13.07,
                        5.8, 2, 7.37, 8.1, 13.57, 15.75, 17.1, 19.8, -27.03, -54.4, -47.2, -43.3, -18.6, -
                        48.6, -41.1, -39.6, -37.6, -29.4, -21.4, -2.4
                    ]
                }],
                chart: {
                    type: 'bar',
                    height: 350
                },
                plotOptions: {
                    bar: {
                        colors: {
                            ranges: [{
                                from: -100,
                                to: -46,
                                color: '#F15B46'
                            }, {
                                from: -45,
                                to: 0,
                                color: '#FEB019'
                            }]
                        },
                        columnWidth: '80%',
                    }
                },
                dataLabels: {
                    enabled: false,
                },
                yaxis: {
                    title: {
                        text: 'Growth',
                    },
                    labels: {
                        formatter: function (y) {
                            return y.toFixed(0) + "%";
                        }
                    }
                },
                xaxis: {
                    type: 'datetime',
                    categories: [
                        '2011-01-01', '2011-02-01', '2011-03-01', '2011-04-01', '2011-05-01', '2011-06-01',
                        '2011-07-01', '2011-08-01', '2011-09-01', '2011-10-01', '2011-11-01', '2011-12-01',
                        '2012-01-01', '2012-02-01', '2012-03-01', '2012-04-01', '2012-05-01', '2012-06-01',
                        '2012-07-01', '2012-08-01', '2012-09-01', '2012-10-01', '2012-11-01', '2012-12-01',
                        '2013-01-01', '2013-02-01', '2013-03-01', '2013-04-01', '2013-05-01', '2013-06-01',
                        '2013-07-01', '2013-08-01', '2013-09-01'
                    ],
                    labels: {
                        rotate: -90
                    }
                }
            };

            var chart = new ApexCharts(document.querySelector("#salesGrowthDecline"), options);
            chart.render();



        }

        function renderStackedBarChart() {


            var options = {
                series: [{
                    name: 'PRODUCT A',
                    data: [44, 55, 41, 67, 22, 43]
                }, {
                    name: 'PRODUCT B',
                    data: [13, 23, 20, 8, 13, 27]
                }, {
                    name: 'PRODUCT C',
                    data: [11, 17, 15, 15, 21, 14]
                }, {
                    name: 'PRODUCT D',
                    data: [21, 7, 25, 13, 22, 8]
                }],
                chart: {
                    type: 'bar',
                    height: 350,
                    stacked: true,
                    toolbar: {
                        show: true
                    },
                    zoom: {
                        enabled: true
                    }
                },
                responsive: [{
                    breakpoint: 480,
                    options: {
                        legend: {
                            position: 'bottom',
                            offsetX: -10,
                            offsetY: 0
                        }
                    }
                }],
                plotOptions: {
                    bar: {
                        horizontal: false,
                        borderRadius: 10
                    },
                },
                xaxis: {
                    type: 'datetime',
                    categories: ['01/01/2011 GMT', '01/02/2011 GMT', '01/03/2011 GMT', '01/04/2011 GMT',
                        '01/05/2011 GMT', '01/06/2011 GMT'
                    ],
                },
                legend: {
                    position: 'right',
                    offsetY: 40
                },
                fill: {
                    opacity: 1
                }
            };

            var chart = new ApexCharts(document.querySelector("#stackedBarChart"), options);
            chart.render();
        }

        function renderLineChartWithOptions() {
            var options = {
                series: [{
                    name: "",
                    data: []
                }],
                chart: {
                    height: 350,
                    type: 'line',
                    zoom: {
                        enabled: false
                    }
                },
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'straight'
                },
                title: {
                    text: 'Product Trends by Month',
                    align: 'left'
                },
                grid: {
                    row: {
                        colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
                        opacity: 0.5
                    },
                },
                xaxis: {
                    categories: [],
                }
            };
            var chart = new ApexCharts(document.querySelector("#lineChart1"), options);
            chart.render();
            $('#dep1Select').on('change', function (e) {
                var val = $(this).val();
                if (val !== "-1") {
                    var url = "/Home/GetDepartmentPerformance1"
                    $.getJSON(url, { teamId: val })
                        .done(function (json) {
                            console.log(json);
                            chart.updateOptions({
                                series: [{
                                    name: "Team Performance",
                                    data: json.performance
                                }],
                                xaxis: {
                                    categories:json.teams
                                    }
                            }, false, true, true);

                        })
                        .fail(function (jqxhr, textStatus, error) {
                            var err = textStatus + ", " + error;
                            console.log("Request Failed: " + err);
                        });
                } else {
                    chart.updateOptions({
                        series: [{
                            name: "Team Performance",
                            data: []
                        }],
                        xaxis: {
                            categories: []
                        }
                    }, false, true, true);
                }
            });
        }

       function renderPieChartWithOptions() {
           var options = {
               series: [],
               chart: {
                   width: 380,
                   type: 'pie',
               },
               labels: [],
               responsive: [{
                   breakpoint: 480,
                   options: {
                       chart: {
                           width: 200
                       },
                       legend: {
                           position: 'bottom'
                       }
                   }
               }]
           };
           var chart = new ApexCharts(document.querySelector("#pieChart1"), options);
           chart.render();
           $('#depSelect').on('change', function (e) {
               var val = $(this).val();
               if (val !== "-1") {
                   var url = "/Home/GetDepartmentPerformance"
                   $.getJSON(url, { teamId: val })
                       .done(function (json) {
                           console.log(json);
                           chart.updateOptions({
                               series: json.performance,
                               labels: json.teams
                           }, false, true, true);

                       })
                       .fail(function (jqxhr, textStatus, error) {
                           var err = textStatus + ", " + error;
                           console.log("Request Failed: " + err);
                       });
               } else {
                   chart.updateOptions({
                       series: [],
                       labels: []
                   }, false, true, true);
               }
           });



       }


       function renderPieChart() {
           var options = {
               series: [44, 55, 13, 43, 22],
               chart: {
                   width: 380,
                   type: 'pie',
               },
               labels: ['Team A', 'Team B', 'Team C', 'Team D', 'Team E'],
               responsive: [{
                   breakpoint: 480,
                   options: {
                       chart: {
                           width: 200
                       },
                       legend: {
                           position: 'bottom'
                       }
                   }
               }]
           };
           var chart = new ApexCharts(document.querySelector("#pieChart"), options);
           chart.render();
       }
       function renderBarChart() {
           var options = {
               series: [{
                   data: [400, 430, 448, 470, 540, 580, 690, 1100, 1200, 1380]
               }],
               chart: {
                   type: 'bar',
                   height: 350
               },
               plotOptions: {
                   bar: {
                       borderRadius: 4,
                       horizontal: true,
                   }
               },
               dataLabels: {
                   enabled: false
               },
               xaxis: {
                   categories: ['South Korea', 'Canada', 'United Kingdom', 'Netherlands', 'Italy', 'France', 'Japan',
                       'United States', 'China', 'Germany'
                   ],
               }
           };

           var chart = new ApexCharts(document.querySelector("#barChart"), options);
           chart.render();

       }
       function renderLineChart() {
           var options = {
               series: [{
                   name: "Desktops",
                   data: [10, 41, 35, 51, 49, 62, 69, 91, 148]
               }],
               chart: {
                   height: 350,
                   type: 'line',
                   zoom: {
                       enabled: false
                   }
               },
               dataLabels: {
                   enabled: false
               },
               stroke: {
                   curve: 'straight'
               },
               title: {
                   text: 'Product Trends by Month',
                   align: 'left'
               },
               grid: {
                   row: {
                       colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
                       opacity: 0.5
                   },
               },
               xaxis: {
                   categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
               }
           };

           var chart = new ApexCharts(document.querySelector("#lineChart"), options);
           chart.render();
       }
    </script>
}